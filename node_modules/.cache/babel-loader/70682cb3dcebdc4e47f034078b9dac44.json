{"remainingRequest":"/Users/sungil/dev/lamaabp-master/node_modules/thread-loader/dist/cjs.js!/Users/sungil/dev/lamaabp-master/node_modules/babel-loader/lib/index.js!/Users/sungil/dev/lamaabp-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sungil/dev/lamaabp-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sungil/dev/lamaabp-master/src/views/theme/CognitoLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sungil/dev/lamaabp-master/src/views/theme/CognitoLogin.vue","mtime":1629353609000},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/cache-loader/dist/cjs.js","mtime":1629959550485},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/thread-loader/dist/cjs.js","mtime":1629959550465},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/babel-loader/lib/index.js","mtime":1629959550575},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/cache-loader/dist/cjs.js","mtime":1629959550485},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/vue-loader/lib/index.js","mtime":1629959547982}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgb25BdXRoVUlTdGF0ZUNoYW5nZSB9IGZyb20gJ0Bhd3MtYW1wbGlmeS91aS1jb21wb25lbnRzJzsKaW1wb3J0IGF3c2NvbmZpZyBmcm9tICcuL2F3c2NvbmZpZyc7CmltcG9ydCBBbXBsaWZ5IGZyb20gJ2F3cy1hbXBsaWZ5JzsKaW1wb3J0IHsgQXV0aCB9IGZyb20gJ2F3cy1hbXBsaWZ5JzsKaW1wb3J0ICdAYXdzLWFtcGxpZnkvdWktdnVlJzsKQW1wbGlmeS5jb25maWd1cmUoYXdzY29uZmlnKTsKaW1wb3J0IHsgQ29nbml0b0hvc3RlZFVJSWRlbnRpdHlQcm92aWRlciB9IGZyb20gIkBhd3MtYW1wbGlmeS9hdXRoL2xpYi90eXBlcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29nbml0b0xvZ2luIiwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnVuc3Vic2NyaWJlQXV0aCA9IG9uQXV0aFVJU3RhdGVDaGFuZ2UoZnVuY3Rpb24gKGF1dGhTdGF0ZSwgYXV0aERhdGEpIHsKICAgICAgX3RoaXMuYXV0aFN0YXRlID0gYXV0aFN0YXRlOwogICAgICBfdGhpcy51c2VyID0gYXV0aERhdGE7CiAgICAgIGNvbnNvbGUubG9nKCJzdGFydCIpOwogICAgICBjb25zb2xlLmxvZyhfdGhpcy51c2VyLnVzZXJuYW1lKTsKCiAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2FsbE11dGF0aW9uJywgewogICAgICAgIG5ld0VtYWlsOiBfdGhpcy51c2VyLnVzZXJuYW1lCiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogdW5kZWZpbmVkLAogICAgICBhdXRoU3RhdGU6IHVuZGVmaW5lZCwKICAgICAgdW5zdWJzY3JpYmVBdXRoOiB1bmRlZmluZWQsCiAgICAgIHVuc3Vic2NyaWJlQXV0aEZlZDogdW5kZWZpbmVkCiAgICB9OwogIH0sCiAgYmVmb3JVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yVXBkYXRlKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdGhpcy51bnN1YnNjcmliZUF1dGhGZWQgPSBBdXRoLmZlZGVyYXRlZFNpZ25Jbih7CiAgICAgIHByb3ZpZGVyOiBDb2duaXRvSG9zdGVkVUlJZGVudGl0eVByb3ZpZGVyLkNvZ25pdG8KICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNyZWQpIHsKICAgICAgLy8gSWYgc3VjY2VzcywgeW91IHdpbGwgZ2V0IHRoZSBBV1MgY3JlZGVudGlhbHMKICAgICAgY29uc29sZS5sb2coY3JlZCk7CiAgICAgIHJldHVybiBBdXRoLmN1cnJlbnRBdXRoZW50aWNhdGVkVXNlcigpOwogICAgfSkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAvLyBJZiBzdWNjZXNzLCB0aGUgdXNlciBvYmplY3QgeW91IHBhc3NlZCBpbiBBdXRoLmZlZGVyYXRlZFNpZ25JbgogICAgICBjb25zb2xlLmxvZygiZmVkc3RhcnQiKTsKICAgICAgY29uc29sZS5sb2codXNlcik7CgogICAgICBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCdjYWxsTXV0YXRpb24nLCB7CiAgICAgICAgbmV3RW1haWw6IHVzZXIKICAgICAgfSk7CgogICAgICBjb25zb2xlLmxvZyh1c2VyKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgfSk7CiAgfSwKICAvLyBtb3VudGVkKCkgewogIC8vICAgY29uc29sZS5sb2coIlRoaXMgaXMgd2hhdCEhIik7CiAgLy8gICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2FsbE11dGF0aW9uJywgeyBuZXdFbWFpbDogdGhpcy51c2VyIH0pCiAgLy8gICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5jb2duaXRvRW1haWwpOwogIC8vIH0sCiAgYmVmb3JlVW5tb3VudDogZnVuY3Rpb24gYmVmb3JlVW5tb3VudCgpIHsKICAgIHRoaXMudW5zdWJzY3JpYmVBdXRoKCk7CiAgICB0aGlzLnVuc3Vic2NyaWJlQXV0aEZlZCgpOwogIH0KfTs="},{"version":3,"sources":["CognitoLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAiBA,SAAA,mBAAA,QAAA,4BAAA;AACA,OAAA,SAAA,MAAA,aAAA;AACA,OAAA,OAAA,MAAA,aAAA;AACA,SAAA,IAAA,QAAA,aAAA;AACA,OAAA,qBAAA;AACA,OAAA,CAAA,SAAA,CAAA,SAAA;AACA,SAAA,+BAAA,QAAA,6BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,OAFA,qBAEA;AAAA;;AACA,SAAA,eAAA,GAAA,mBAAA,CACA,UAAA,SAAA,EAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,SAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,QAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA;;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,cAAA,EAAA;AAAA,QAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA;AAAA,OAAA;AACA,KAPA,CAAA;AAQA,GAXA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,SADA;AACA,MAAA,SAAA,EAAA,SADA;AACA,MAAA,eAAA,EAAA,SADA;AACA,MAAA,kBAAA,EAAA;AADA,KAAA;AAGA,GAhBA;AAiBA,EAAA,WAjBA,yBAiBA;AAAA;;AACA,SAAA,kBAAA,GAAA,IAAA,CAAA,eAAA,CAAA;AAAA,MAAA,QAAA,EAAA,+BAAA,CAAA;AAAA,KAAA,EACA,IADA,CACA,UAAA,IAAA,EAAA;AACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,aAAA,IAAA,CAAA,wBAAA,EAAA;AACA,KALA,EAKA,IALA,CAKA,UAAA,IAAA,EAAA;AACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;;AACA,MAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,cAAA,EAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KAXA,EAWA,KAXA,CAWA,UAAA,CAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,KAbA,CAAA;AAcA,GAhCA;AAiCA;AACA;AACA;AACA;AACA;AACA,EAAA,aAtCA,2BAsCA;AACA,SAAA,eAAA;AACA,SAAA,kBAAA;AACA;AAzCA,CAAA","sourcesContent":["<template>\n<!--  <amplify-authenticator>-->\n<!--    <div v-if=\"authState === 'signedin' && user\">-->\n<!--      My App, {{ user.username }} !!!-->\n<!--      <amplify-sign-out></amplify-sign-out>-->\n<!--    </div>-->\n<!--  </amplify-authenticator>-->\n\n  <amplify-authenticator :federated=\"federatedIds\">\n    <div v-if=\"authState === 'signedin' && user\">\n      <div>Hello, {{user.username}}</div>\n    </div>\n    <amplify-sign-out></amplify-sign-out>\n  </amplify-authenticator>\n</template>\n\n<script>\nimport { onAuthUIStateChange } from '@aws-amplify/ui-components'\nimport awsconfig from './awsconfig';\nimport Amplify from 'aws-amplify';\nimport { Auth } from 'aws-amplify';\nimport '@aws-amplify/ui-vue';\nAmplify.configure(awsconfig);\nimport { CognitoHostedUIIdentityProvider } from \"@aws-amplify/auth/lib/types\";\n\nexport default {\n  name: \"CognitoLogin\",\n  created() {\n    this.unsubscribeAuth = onAuthUIStateChange(\n        (authState, authData) => {\n          this.authState = authState;\n          this.user = authData;\n          console.log(\"start\")\n          console.log(this.user.username)\n          this.$store.dispatch('callMutation', { newEmail: this.user.username })\n        });\n  },\n  data() {\n    return {\n      user: undefined, authState: undefined, unsubscribeAuth: undefined, unsubscribeAuthFed: undefined\n    }\n  },\n  beforUpdate() {\n    this.unsubscribeAuthFed = Auth.federatedSignIn( {provider: CognitoHostedUIIdentityProvider.Cognito}\n    ).then(cred => {\n      // If success, you will get the AWS credentials\n      console.log(cred);\n      return Auth.currentAuthenticatedUser();\n    }).then(user => {\n        // If success, the user object you passed in Auth.federatedSignIn\n      console.log(\"fedstart\")\n      console.log(user)\n      this.$store.dispatch('callMutation', { newEmail: user })\n      console.log(user);\n    }).catch(e => {\n      console.log(e)\n    });\n  },\n  // mounted() {\n  //   console.log(\"This is what!!\");\n  //   this.$store.dispatch('callMutation', { newEmail: this.user })\n  //   console.log(this.$store.state.cognitoEmail);\n  // },\n  beforeUnmount() {\n    this.unsubscribeAuth();\n    this.unsubscribeAuthFed();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/views/theme"}]}