{"remainingRequest":"/Users/sungil/dev/lamaabp-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sungil/dev/lamaabp-master/src/views/theme/CognitoLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sungil/dev/lamaabp-master/src/views/theme/CognitoLogin.vue","mtime":1629353609000},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/cache-loader/dist/cjs.js","mtime":1629959550485},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/babel-loader/lib/index.js","mtime":1629959550575},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/cache-loader/dist/cjs.js","mtime":1629959550485},{"path":"/Users/sungil/dev/lamaabp-master/node_modules/vue-loader/lib/index.js","mtime":1629959547982}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG9uQXV0aFVJU3RhdGVDaGFuZ2UgfSBmcm9tICdAYXdzLWFtcGxpZnkvdWktY29tcG9uZW50cycKaW1wb3J0IGF3c2NvbmZpZyBmcm9tICcuL2F3c2NvbmZpZyc7CmltcG9ydCBBbXBsaWZ5IGZyb20gJ2F3cy1hbXBsaWZ5JzsKaW1wb3J0IHsgQXV0aCB9IGZyb20gJ2F3cy1hbXBsaWZ5JzsKaW1wb3J0ICdAYXdzLWFtcGxpZnkvdWktdnVlJzsKQW1wbGlmeS5jb25maWd1cmUoYXdzY29uZmlnKTsKaW1wb3J0IHsgQ29nbml0b0hvc3RlZFVJSWRlbnRpdHlQcm92aWRlciB9IGZyb20gIkBhd3MtYW1wbGlmeS9hdXRoL2xpYi90eXBlcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNvZ25pdG9Mb2dpbiIsCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMudW5zdWJzY3JpYmVBdXRoID0gb25BdXRoVUlTdGF0ZUNoYW5nZSgKICAgICAgICAoYXV0aFN0YXRlLCBhdXRoRGF0YSkgPT4gewogICAgICAgICAgdGhpcy5hdXRoU3RhdGUgPSBhdXRoU3RhdGU7CiAgICAgICAgICB0aGlzLnVzZXIgPSBhdXRoRGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJzdGFydCIpCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXIudXNlcm5hbWUpCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2FsbE11dGF0aW9uJywgeyBuZXdFbWFpbDogdGhpcy51c2VyLnVzZXJuYW1lIH0pCiAgICAgICAgfSk7CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogdW5kZWZpbmVkLCBhdXRoU3RhdGU6IHVuZGVmaW5lZCwgdW5zdWJzY3JpYmVBdXRoOiB1bmRlZmluZWQsIHVuc3Vic2NyaWJlQXV0aEZlZDogdW5kZWZpbmVkCiAgICB9CiAgfSwKICBiZWZvclVwZGF0ZSgpIHsKICAgIHRoaXMudW5zdWJzY3JpYmVBdXRoRmVkID0gQXV0aC5mZWRlcmF0ZWRTaWduSW4oIHtwcm92aWRlcjogQ29nbml0b0hvc3RlZFVJSWRlbnRpdHlQcm92aWRlci5Db2duaXRvfQogICAgKS50aGVuKGNyZWQgPT4gewogICAgICAvLyBJZiBzdWNjZXNzLCB5b3Ugd2lsbCBnZXQgdGhlIEFXUyBjcmVkZW50aWFscwogICAgICBjb25zb2xlLmxvZyhjcmVkKTsKICAgICAgcmV0dXJuIEF1dGguY3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyKCk7CiAgICB9KS50aGVuKHVzZXIgPT4gewogICAgICAgIC8vIElmIHN1Y2Nlc3MsIHRoZSB1c2VyIG9iamVjdCB5b3UgcGFzc2VkIGluIEF1dGguZmVkZXJhdGVkU2lnbkluCiAgICAgIGNvbnNvbGUubG9nKCJmZWRzdGFydCIpCiAgICAgIGNvbnNvbGUubG9nKHVzZXIpCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjYWxsTXV0YXRpb24nLCB7IG5ld0VtYWlsOiB1c2VyIH0pCiAgICAgIGNvbnNvbGUubG9nKHVzZXIpOwogICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGUpCiAgICB9KTsKICB9LAogIC8vIG1vdW50ZWQoKSB7CiAgLy8gICBjb25zb2xlLmxvZygiVGhpcyBpcyB3aGF0ISEiKTsKICAvLyAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjYWxsTXV0YXRpb24nLCB7IG5ld0VtYWlsOiB0aGlzLnVzZXIgfSkKICAvLyAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLmNvZ25pdG9FbWFpbCk7CiAgLy8gfSwKICBiZWZvcmVVbm1vdW50KCkgewogICAgdGhpcy51bnN1YnNjcmliZUF1dGgoKTsKICAgIHRoaXMudW5zdWJzY3JpYmVBdXRoRmVkKCk7CiAgfQp9Cg=="},{"version":3,"sources":["CognitoLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CognitoLogin.vue","sourceRoot":"src/views/theme","sourcesContent":["<template>\n<!--  <amplify-authenticator>-->\n<!--    <div v-if=\"authState === 'signedin' && user\">-->\n<!--      My App, {{ user.username }} !!!-->\n<!--      <amplify-sign-out></amplify-sign-out>-->\n<!--    </div>-->\n<!--  </amplify-authenticator>-->\n\n  <amplify-authenticator :federated=\"federatedIds\">\n    <div v-if=\"authState === 'signedin' && user\">\n      <div>Hello, {{user.username}}</div>\n    </div>\n    <amplify-sign-out></amplify-sign-out>\n  </amplify-authenticator>\n</template>\n\n<script>\nimport { onAuthUIStateChange } from '@aws-amplify/ui-components'\nimport awsconfig from './awsconfig';\nimport Amplify from 'aws-amplify';\nimport { Auth } from 'aws-amplify';\nimport '@aws-amplify/ui-vue';\nAmplify.configure(awsconfig);\nimport { CognitoHostedUIIdentityProvider } from \"@aws-amplify/auth/lib/types\";\n\nexport default {\n  name: \"CognitoLogin\",\n  created() {\n    this.unsubscribeAuth = onAuthUIStateChange(\n        (authState, authData) => {\n          this.authState = authState;\n          this.user = authData;\n          console.log(\"start\")\n          console.log(this.user.username)\n          this.$store.dispatch('callMutation', { newEmail: this.user.username })\n        });\n  },\n  data() {\n    return {\n      user: undefined, authState: undefined, unsubscribeAuth: undefined, unsubscribeAuthFed: undefined\n    }\n  },\n  beforUpdate() {\n    this.unsubscribeAuthFed = Auth.federatedSignIn( {provider: CognitoHostedUIIdentityProvider.Cognito}\n    ).then(cred => {\n      // If success, you will get the AWS credentials\n      console.log(cred);\n      return Auth.currentAuthenticatedUser();\n    }).then(user => {\n        // If success, the user object you passed in Auth.federatedSignIn\n      console.log(\"fedstart\")\n      console.log(user)\n      this.$store.dispatch('callMutation', { newEmail: user })\n      console.log(user);\n    }).catch(e => {\n      console.log(e)\n    });\n  },\n  // mounted() {\n  //   console.log(\"This is what!!\");\n  //   this.$store.dispatch('callMutation', { newEmail: this.user })\n  //   console.log(this.$store.state.cognitoEmail);\n  // },\n  beforeUnmount() {\n    this.unsubscribeAuth();\n    this.unsubscribeAuthFed();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}